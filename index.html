<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Apexo Manual</title>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
		/>

        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-title" content="Apexo">
        <link rel="apple-touch-icon" href="./build/web/icons/Icon-192.png">
      
        <!-- Favicon -->
        <link rel="icon" type="image/png" href="./build/web/favicon.png"/>

		<style>
			body {
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
					Oxygen, Ubuntu, Cantarell, sans-serif;
				margin: 0;
				padding: 0;
				background-color: #ffffff;
				color: #2c3e50;
				display: flex;
				flex-direction: row;
				height: 100vh;
			}

			#nav {
				flex-shrink: 0;
				width: 250px;
				border: 1px solid #eaeaea;
				box-sizing: border-box;
				overflow-y: auto;
				background-color: #f9fafb;
				box-shadow: 0px 0 15px rgb(0 0 0 / 4%);
				margin: 10px;
				border-radius: 4px;
			}

			#nav h3 {
				color: #fff;
				text-align: center;
				font-size: 17px;
				margin: 0;
				padding: 10px 20px;
				border: none;
				background-color: #1a365d;
				box-shadow: 0 0 13px 3px #1a365d4a;
			}

			#nav ul {
				list-style-type: none;
				padding: 0;
			}

			#nav ul li a {
				text-decoration: none;
				color: #4a5568;
				font-weight: 500;
				display: block;
				padding: 8px 12px;
				border-radius: 6px;
				transition: all 0.2s ease;
			}

			#nav ul li a:hover {
				background-color: #edf2f7;
				color: #2b6cb0;
				text-decoration: none;
			}

			main {
				flex-grow: 1;
				padding: 40px;
				overflow-y: auto;
				box-sizing: border-box;
				line-height: 1.6;
			}

			h1,
			h2,
			h3 {
				color: #2d3748;
				border-bottom: 2px solid #e2e8f0;
				padding-bottom: 8px;
				margin-top: 2em;
			}

			pre {
				background: #f8fafc;
				padding: 20px;
				border-radius: 8px;
				border-left: 4px solid #4299e1;
				overflow-x: auto;
				margin: 20px 0;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
			}

			code {
				font-family: "Fira Code", Consolas, Monaco, monospace;
				font-size: 0.9em;
			}

			img {
				max-width: 300px;
				width: 100%;
				cursor: pointer;
				transition: transform 0.3s ease, box-shadow 0.3s ease;
				display: block;
				margin: 40px auto;
				border: none;
				border-radius: 8px;
				box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			}

			img:hover {
				transform: scale(1.03);
				box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
			}

			blockquote {
				border-radius: 7px;
				padding-left: 20px;
				padding: 10px;
				border: 1px solid #1a365d;
				border-left-width: 9px;
				margin-bottom: 20px;
				background-color: #f8f8f8;
			}

			.menu-toggle {
				display: none;
				position: fixed;
				bottom: 20px;
				right: 20px;
				z-index: 1000;
				background: none;
				border: none;
				cursor: pointer;
				padding: 10px;
				background: #1a365d;
				border-radius: 15px;
				box-shadow: 0 0 20px 5px #92a0b3;
			}

			.menu-toggle span {
				display: block;
				width: 25px;
				height: 3px;
				margin: 5px 0;
				background: #f9fafb;
				transition: all 0.3s ease;
			}

			@media screen and (max-width: 768px) {
				#nav {
					position: fixed;
					left: -350px;
					top: 0;
					height: 97%;
					transition: left 0.3s ease;
					z-index: 999;
				}

				#nav.active {
					left: 0;
				}

				.menu-toggle {
					display: block;
				}

				.menu-toggle.active span:nth-child(1) {
					transform: rotate(45deg) translate(5px, 5px);
				}

				.menu-toggle.active span:nth-child(2) {
					opacity: 0;
				}

				.menu-toggle.active span:nth-child(3) {
					transform: rotate(-45deg) translate(7px, -7px);
				}
			}
		</style>
	</head>
	<body>
		<button id="menuToggle" class="menu-toggle">
			<span></span>
			<span></span>
			<span></span>
		</button>
		<div id="nav">
			<h3>Apexo Manual</h3>
			<ul id="toc">
				<li>Loading...</li>
			</ul>
		</div>
		<main id="content">
			<p>Loading documentation...</p>
		</main>

		<script>
			async function fetchMarkdown() {
				const markdownUrl =
					"https://raw.githubusercontent.com/alselawi/apexo-flutter/master/manual.md";

				try {
					const response = await fetch(markdownUrl);
					if (!response.ok) {
						throw new Error(`HTTP error! status: ${response.status}`);
					}

					const markdownText = await response.text();
					const html = marked.marked(markdownText); // Convert Markdown to HTML
					const contentElement = document.getElementById("content");
					contentElement.innerHTML = html;

					generateTableOfContents(html);
				} catch (error) {
					document.getElementById(
						"content"
					).innerHTML = `<p>Error loading documentation: ${error.message}</p>`;
				}

				const images = document.querySelectorAll("img");
				images.forEach((img) => {
					img.addEventListener("click", () => {
						const lightbox = document.createElement("div");
						lightbox.style =
							"position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 1000;";

						const fullImg = document.createElement("img");
						fullImg.src = img.src;
						fullImg.style =
							"max-width: 90%; max-height: 90%; object-fit: contain;";

						lightbox.appendChild(fullImg);
						document.body.appendChild(lightbox);

						lightbox.addEventListener("click", () => {
							lightbox.remove();
						});
					});
				});
			}

			function generateTableOfContents(html) {
				const contentElement = document.getElementById("content");
				const headers = contentElement.querySelectorAll("h1, h2, h3");
				const toc = document.getElementById("toc");

				toc.innerHTML = "";

				headers.forEach((header, index) => {
					const id = `section-${index}`;
					header.id = id;

					const listItem = document.createElement("li");
					const link = document.createElement("a");
					link.href = `#${id}`;
					link.textContent = header.textContent;
					listItem.appendChild(link);
					toc.appendChild(listItem);
				});
			}

			// Load the Markdown parser library
			const script = document.createElement("script");
			script.src = "https://cdn.jsdelivr.net/npm/marked/marked.min.js";
			script.onload = fetchMarkdown;
			document.head.appendChild(script);
		</script>

		<script>
			const menuToggle = document.getElementById("menuToggle");

			menuToggle.addEventListener("click", () => {
				const nav = document.querySelector("#nav");
				nav.classList.toggle("active");
				menuToggle.classList.toggle("active");
			});

			// Close menu when clicking outside
			document.addEventListener("click", (e) => {
				const nav = document.querySelector("#nav");
				if (!nav.contains(e.target) && !menuToggle.contains(e.target)) {
					nav.classList.remove("active");
					menuToggle.classList.remove("active");
				}
			});
		</script>
	</body>
</html>
